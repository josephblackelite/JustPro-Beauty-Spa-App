import{r as t,c as s,h as e,H as i,g as n}from"./p-3922cc8d.js";import{l as a}from"./p-56a89bc1.js";const h=class{constructor(e){t(this,e),this.stripeLoaded=s(this,"stripeLoaded",7),this.loadStripeStatus="",this.applicationName="@stripe-elements/stripe-elements",void 0!==this.publishableKey&&void 0!==this.paymentRequestOption?this.initStripe(this.publishableKey,{stripeAccount:this.stripeAccount}):this.loadStripeStatus="failure"}async isAvailable(t){if(void 0===this.publishableKey)throw"You should run this method run, after set publishableKey.";const s=(await a(this.publishableKey,{stripeAccount:this.stripeAccount})).paymentRequest({country:"US",currency:"usd",total:{label:"Demo total",amount:1099},disableWallets:["applePay","googlePay","browserCard"].filter((s=>s!==t))}),e=await s.canMakePayment();if(!e||"applePay"===t&&!e[t]||"googlePay"===t&&!e[t])throw"This device can not use."}async setPaymentMethodEventHandler(t){this.paymentMethodEventHandler=t}async setPaymentRequestShippingOptionEventHandler(t){this.shippingOptionEventHandler=t}async setPaymentRequestShippingAddressEventHandler(t){this.shippingAddressEventHandler=t}stripeLoadedEventHandler(){const t={stripe:this.stripe};this.stripeDidLoaded&&this.stripeDidLoaded(t),this.stripeLoaded.emit(t)}async setPaymentRequestOption(t){return this.paymentRequestOption=t,this}async initStripe(t,s){this.loadStripeStatus="loading",a(t,{stripeAccount:null==s?void 0:s.stripeAccount}).then((t=>{this.loadStripeStatus="success",t.registerAppInfo({name:this.applicationName}),this.stripe=t})).catch((t=>{console.log(t),this.loadStripeStatus="failure"})).then((()=>{if(this.stripe)return this.initElement(0==!(null==s?void 0:s.showButton))})).then((()=>{this.stripe&&this.stripeLoadedEventHandler()}))}async initElement(t=!0){const s=this.stripe.paymentRequest(this.paymentRequestOption);if(!await s.canMakePayment())throw"paymentRequest is not support.";if(this.paymentMethodEventHandler&&s.on("paymentmethod",(t=>{this.paymentMethodEventHandler(t,this.stripe)})),this.shippingOptionEventHandler&&s.on("shippingoptionchange",(t=>{this.shippingOptionEventHandler(t,this.stripe)})),this.shippingAddressEventHandler&&s.on("shippingaddresschange",(t=>{this.shippingAddressEventHandler(t,this.stripe)})),t){const t=this.stripe.elements().create("paymentRequestButton",{paymentRequest:s}),e=this.el.querySelector("#payment-request-button");t.mount(e),this.el.querySelector("#payment-request").classList.add("visible")}else s.show()}render(){return e(i,null,e("div",{id:"payment-request"},e("div",{id:"payment-request-button"})),e("slot",null))}get el(){return n(this)}};h.style=":host{display:block}";export{h as stripe_payment_request_button}