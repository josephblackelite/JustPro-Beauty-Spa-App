<!-- Wappler include head-page="index.html" is="dmx-app" id="chooseprofessional" appConnect="local" framework7_6="With App Connect" framework7_icons="local" capacitor="local" components="{dmxSwiper:{},dmxSockets:{},dmxFormatter:{},dmxPreloader:{}}" fontawesome_5="local" -->

<div class="page welcome-screen" path="/choose-professional/:service_id/:parent_provider_id/:provider_service_id" data-name="choose-professional" id="chooseprofessional">

    <dmx-serverconnect id="list_employees" url="https://api.justpro.me/api/provider/list_provider_employees_4_service" site="JustPro-Spa-Backend" dmx-param:service_id="app.main.chooseprofessional.route.params.service_id" dmx-param:provider_type="app.local_store.data.service_location" dmx-param:customer_address_id="app.main.chooseprofessional.search_by_name.value" dmx-param:search_by_name="app.main.chooseprofessional.search_by_name.value" dmx-param:parent_provider_id="app.main.chooseprofessional.route.params.parent_provider_id"></dmx-serverconnect>
    <dmx-serverconnect id="service_info" url="https://api.justpro.me/api/services/service_info" site="JustPro-Spa-Backend" dmx-param:service_id="app.main.chooseprofessional.route.params.service_id" sockets="true"></dmx-serverconnect>
    <div class="padding-top padding-bottom">
        <div class="navbar shadow">
            <div class="navbar-inner" style="padding-right:0px !important; padding-left:0px !important; margin-right:0px !important">

                <div class="left">
                    <a href="#" class="link back">
                        <i class="icon f7-icons">arrow_left</i>
                    </a>

                </div>

                <div class="title"> {{app.local_store.data.service_location.titlecase()}} Provider</div>
                <div class="right">
                    <a href="#" class="link panel-open icon-only" data-panel="left">

                        <i class="icon f7-icons">ellipsis_vertical</i>
                    </a>
                </div>
                <div class="subnavbar">
                    <div class="list" style="width:100%">
                        <ul>
                            <li class="item-content item-input item-input-outline">
                                <div class="item-inner" style="width:100% !important">
                                    <div class="item-title item-floating-label strong"><i class="bi bi-search"></i> &nbsp; Find professional by name</div>
                                    <div class="item-input-wrap" style="width:100% !important">
                                        <input type="text" placeholder="Search by name" class="form-control" id="search_by_name" name="search_by_name" style="width:100% !important" />
                                        <span class="input-clear-button"></span>
                                    </div>
                                </div>

                            </li>
                        </ul>

                    </div>


                </div>
            </div>
        </div>

    </div>
    <div class="page-content wappler-block">
        <dmx-preloader id="justpropreloader" spinner="pulse" color="#ff6600"></dmx-preloader>

        <div class="block"></div>
        <div class="row up-50">
            <div class="col-100">
                <div class="block-title h6 strong custom-font text-color-primary">{{app.main.chooseprofessional.service_info.data.queryServices.count()}} {{app.main.chooseprofessional.service_info.data.queryServices.product_name.titlecase()}} Service Providers</div>
            </div>
            <div class="col-100">

                <div class="row no-gap up-10">
                    <div class="col-100" dmx-hide="app.main.home.querySalons.state.processing" dmx-repeat:repeat_employees="app.main.chooseprofessional.list_employees.data.repeatEmployees">
                        <div class="card demo-card-header-pic no-shadow card-outline border-10">

                            <div class="card-header align-items-flex-end" dmx-style:background-image="'url('+ provider_avatar +')'" style="height:256px; background-position:bottom">
                                <span style="font-size:26px; text-transform:capitalize; strong" class="tajawal nametag">
                                    {{staff_name.capitalize()}}
                                </span>
                                <div class="col-100 no-padding">
                                    <span class="fa fa-star small" dmx-class:checked="(rating > 0)"></span>
                                    <span class="fa fa-star small" dmx-class:checked="(rating > 1)"></span>
                                    <span class="fa fa-star small" dmx-class:checked="(rating > 2)"></span>
                                    <span class="fa fa-star small" dmx-class:checked="(rating > 3)"></span>
                                    <span class="fa fa-star small" dmx-class:checked="(rating > 4)"></span>
                                </div>
                            </div>
                            <div class="card-footer no-border bg-transparent">
                                <div class="" style="width: 100%;">
                                    <div class="padding smallfont">
                                        {{brief_introduction}}
                                    </div>
                                    <div class="">
                                        <button class="button-6 button-small rounded-lg text-color-white brand-bg" dmx-on:click="run([{run:{action:`app.cart_preFill.set(\'employee_id\',id);app.cart_preFill.set(\'parent_provider_id\',parent_provider_id)`}},{run:{action:`app.selected_employee_id.setValue(id)`}},{run:{action:`app.main.navigate(\'/appointment-page/\'+id+\'/\'+app.main.chooseprofessional.route.params.provider_service_id,{})`}}])">
                                            Book {{staff_name.capitalize()}}
                                        </button>
                                    </div>
                                </div>

                            </div>
                        </div>

                    </div>

                </div>







            </div>


            <!--
            <div class="row" dmx-show="(app.local_store.data.service_location == 'salon')">
                <div class="col-100 mb-10" dmx-repeat:repeat_providers="app.main.chooseprofessional.list_providers.data.repeat_providers">
                    <div class="block-title h4 strong custom-font">{{staff_name.capitalize()}} <small>({{list_salon_staff.count()}} Employees)</small>
                        
                    </div>

                    <div class="list media-list" dmx-repeat:stafflist="list_salon_staff">
                        <ul>
                            <li dmx-on:click="run([{run:{action:`app.Cart.update({product_id: app.main.chooseprofessional.route.params.service_id.toNumber()},{provider_id: id})`}},{run:{action:`app.main.navigate(\'/appointment-page/\'+id,{})`}}])" style="width:100% !important">
                                <a href="#" class="item-link item-content">
                                    <div class="item-media"><img width="80" height="80" dmx-bind:src="provider_avatar" style="border-radius:50%" /></div>
                                    <div class="item-inner">
                                        <div class="item-title-row">
                                            <div class="item-title strong">{{staff_name.titlecase()}}</div>
                                            <div class="item-after text-color-black">Choose</div>
                                        </div>
                                        <div class="item-subtitle small">5 <i class="bi bi-star-fill text-color-red"></i></div>
                                        <div class="item-text"></div>
                                    </div>
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div> -->
        </div>
    </div>
</div>