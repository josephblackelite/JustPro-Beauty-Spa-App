<!-- Wappler include head-page="index.html" is="dmx-app" id="updateprofile" appConnect="local" framework7_6="With App Connect" framework7_icons="local" capacitor="local" components="{dmxFormatter:{},dmxDropzone:{}}" -->

<div class="page profile-wrapper" id="updateprofile" data-name="update-profile" path="/update-profile">
    <div class="padding-top padding-bottom">
        <div class="navbar no-hairline no-shadow no-border">
            <div class="navbar-inner" style="padding-right:0px !important; padding-left:0px !important; margin-right:0px !important">
                <div class="left">
                    <a href="#" class="link back">
                        <i class="icon f7-icons">arrow_left</i>
                    </a>

                </div>

                <div class="title">Edit Profile</div>
                <div class="right">
                    <a href="#" class="link panel-open icon-only" data-panel="left">

                        <i class="icon f7-icons">ellipsis_vertical</i>
                    </a>
                </div>
            </div>
        </div>
    </div>
    <div class="toolbar toolbar-bottom toolbar-bottom-md">
        <div class="toolbar-inner" style="padding:10px !important">
            <button href="" class="button-large button-18 bg-color-primary button-fill rounded-xl" dmx-on:click="run({condition:{if:`(app.main.updateprofile.update_profile_form.name.value &amp;&amp; (app.main.updateprofile.update_profile_form.gender.value &amp;&amp; (app.main.updateprofile.update_profile_form.mobile_number.value &amp;&amp; app.main.updateprofile.update_profile_form.email.value)))`,then:{steps:{run:{action:`app.main.updateprofile.update_profile_form.submit()`}}}}})" dmx-bind:disabled="app.main.updateprofile.update_profile_form.state.executing"><span dmx-hide="app.main.updateprofile.update_profile_form.state.executing" style="width:100% !important">Save Profile</span>
                <div class="preloader color-purple" dmx-show="app.main.updateprofile.update_profile_form.state.executing"></div>
            </button>
        </div>
    </div>
    <div class="page-content content-area">
        <div class="container">
            <div class="form-elements">
                <form is="dmx-serverconnect-form" method="post" id="update_profile_form" dmx-on:success="run({'f7.dialog.confirm':{title:'Success',text:'Your profile information is now updated!',then:{steps:{run:{action:`app.main.back(,{})`}}}}})" site="JustPro-Spa-Backend" action="https://api.justpro.me/api/security/update_profile" dmx-on:invalid="run({'f7.dialog.alert':{title:'Error',text:`app.main.updateprofile.update_profile_form.lastError.response`}})">
                    <input id="user_id" name="user_id" type="hidden" dmx-bind:value="app.Current_user.data.customer.id">
                    <div class="title-head">
                        <h2 class="title">Update your profile</h2>
                        <p>Please provide basic information to help our stylists identify you. </p>
                    </div>
                    <div class="list">
                        <ul class="row">
                            <li class="item-content col-100 item-input item-input-with-value no-border no-hairline">
                                <div class="item-inner">
                                    <div class="item-title item-label">Name</div>
                                    <div class="item-input-wrap">
                                        <input type="text" placeholder="name" class="form-control" id="name" name="name" dmx-bind:value="app.Current_user.data.customer.customer_name" />
                                    </div>
                                </div>
                            </li>
                            <li class="item-content col-100 item-input item-input-with-value">
                                <div class="item-inner">
                                    <div class="item-title item-label">Gender</div>
                                    <div class="item-input-wrap">
                                        <select id="gender" class="form-control" name="gender" dmx-bind:value="app.Current_user.data.customer.customer_sex">
                                            <option value="male">Male</option>
                                            <option value="female">Female</option>
                                        </select>
                                    </div>
                                </div>
                            </li>
                            <li class="item-content col-100 item-input item-input-with-value">
                                <div class="item-inner">
                                    <div class="item-title item-label">Mobile number</div>
                                    <div class="item-input-wrap row">
                                        <div class="col-30"><select id="country_code" class="form-control" name="country_code" dmx-bind:options="app.countryList.data" optiontext="code+' '+dial_code" optionvalue="code" dmx-bind:value="'AE'">
                                            </select>
                                        </div>
                                        <div class="col-70"><input type="number" placeholder="+971*********" class="form-control" id="mobile_number" dmx-bind:value="app.Current_user.data.customer.phone_number" name="mobile_number" /></div>


                                    </div>
                                </div>
                            </li>
                            <li class="item-content col-100 item-input">
                                <div class="item-inner">
                                    <div class="item-title item-label">Email</div>
                                    <div class="item-input-wrap">
                                        <input type="email" placeholder="Email Address" class="form-control" name="email" dmx-bind:value="app.Current_user.data.customer.customer_email">
                                    </div>
                                </div>
                            </li>
                            <li class="item-content col-100 item-input">
                                <div class="item-inner">
                                    <div class="item-title item-label">Upload profile photo</div>
                                    <div class="item-input-wrap">
                                        <input id="profile_photo" type="file" is="dmx-dropzone" name="profile_photo">
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </div>
                    <div class="clearfix text-align-center pb-30">
                        <p>All fields are required</p>

                    </div>
                </form>

            </div>
        </div>
    </div>
</div>