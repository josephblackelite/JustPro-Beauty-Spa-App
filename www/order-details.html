<!-- Wappler include head-page="index.html" is="dmx-app" id="orders" appConnect="local" framework7_6="With App Connect" framework7_icons="local" capacitor="local" components="{dmxSwiper:{},dmxFormatter:{},dmxSockets:{}}" -->

<div class="page" id="orderdetails" data-name="ordersdetails" path="/order-details/:id/:uuid">
    <div class="padding-top padding-bottom">
        <div class="navbar no-hairline no-shadow no-border">
            <div class="navbar-inner" style="padding-right:0px !important; padding-left:0px !important; margin-right:0px !important">
                <div class="left">
                    <a href="#" class="link back">
                        <i class="icon f7-icons">arrow_left</i>
                    </a>
                </div>
                <div class="title">Appointment</div>
                <div class="right">
                    <a href="#" class="link panel-open icon-only" data-panel="left">
                        <i class="icon f7-icons">ellipsis_vertical</i>
                    </a>
                </div>
            </div>
        </div>
    </div>
    <div class="toolbar toolbar-bottom toolbar-bottom-md">
        <div class="toolbar-inner justify-content-center" style="padding:10px !important">
            <a class="button-large rounded-xl button-6 bg-color-primary button-fill text-color-white" style="width:100%" href="#!" dmx-on:click="app.main.navigate('/cancel-appointment/'+app.main.orderdetails.route.params.id+'/'+app.main.orderdetails.route.params.uuid,{})" dmx-show="(app.main.orderdetails.orderinfo.data.query.order_status == 'pending')">Cancel Appointment</a>
        </div>
    </div>

    <div class="page-content content-area">
        <dmx-serverconnect id="orderinfo" url="https://api.justpro.me/api/customer_orders/order_details" site="JustPro-Spa-Backend" dmx-param:order_id="app.main.orderdetails.route.params.id" dmx-on:start="app.showPreloader('purple')" dmx-on:done="app.hidePreloader()" sockets="true"></dmx-serverconnect>
        <dmx-serverconnect id="orderchildren" url="https://api.justpro.me/api/customer_orders/order_items_details" site="JustPro-Spa-Backend" dmx-param:order_uuid="app.main.orderdetails.route.params.uuid" dmx-on:start="app.showPreloader('purple')" dmx-on:done="app.hidePreloader()" sockets="true"></dmx-serverconnect>

        <div class="col-100" style="margin-bottom:150px !important">



            <div class="list">
                <ul>
                    <li>
                        <a href="#" class="item-link item-content">
                            <div class="item-media">
                                <i class="bi bi-calendar-date"></i>
                            </div>
                            <div class="item-inner">
                                <div class="item-title">
                                    <div class="item-header">Date</div>{{app.main.orderdetails.orderinfo.data.query.appointment_date.formatDate('dd MMMM yy')}}
                                </div>
                                <div class="item-after">&nbsp;</div>
                            </div>
                        </a>
                    </li>
                    <li>
                        <a href="#" class="item-link item-content">
                            <div class="item-media">
                                <i class="bi bi-alarm"></i>
                            </div>
                            <div class="item-inner">
                                <div class="item-title">
                                    <div class="item-header">Time</div>{{app.main.orderdetails.orderinfo.data.query.timeSlot_start}} - {{app.main.orderdetails.orderinfo.data.query.timeSlot_end}}
                                </div>
                                <div class="item-after">&nbsp;</div>
                            </div>
                        </a>
                    </li>
                    <li>
                        <a href="#" class="item-link item-content">
                            <div class="item-media">
                                <i class="bi bi-cash"></i>
                            </div>
                            <div class="item-inner">
                                <div class="item-title">
                                    <div class="item-header">Amount</div>{{app.main.orderdetails.orderinfo.data.query.total_amt.toNumber().formatCurrency('AED', '.', ',', 2)}}
                                </div>
                                <div class="item-after"><span class="badge color-green" dmx-show="app.main.orderdetails.orderinfo.data.query.order_paid">Paid</span></div>
                            </div>
                        </a>
                    </li>
                </ul>
            </div>

            <div class="col-100">
                <h5 class="tajawal mt-10 mb-10 block">Appointment Details</h5>
                <div class="list">
                    <ul>
                        <li dmx-repeat:fullinfo="app.main.orderdetails.orderchildren.data.query" dmx-on:click="app.main.navigate('/review-service/'+service_id,{})">
                            <div class="item-content">
                                <div class="item-media"><img width="60px" height="60px" style="border-radius:50%" dmx-bind:src="item_image"></div>
                                <div class="item-inner">
                                    <div class="item-title">{{product_name.titlecase()}}</div>
                                    <div class="item-after">{{total_amt.toNumber().formatCurrency('AED', '.', ',', 2)}}</div>
                                </div>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <!-- Toolbar -->
</div>