<!-- Wappler include head-page="index.html" is="dmx-app" id="productinfo" appConnect="local" framework7_6="With App Connect" framework7_icons="local" capacitor="local" fontawesome_5="local" components="{dmxSwiper:{},dmxFormatter:{},dmxSockets:{},dmxPreloader:{},dmxValidator:{},dmxSlideshow:{}}" -->

<style>
    .strong {
        font-weight: 600 !important;
    }
</style>
<div class="page" path="/product-info/:id" data-name="product-info" id="product_info">

    <dmx-value id="varQty" dmx-bind:value="app.main.product_info.qty_form.quantity.value"></dmx-value>
    <dmx-serverconnect id="service_info" url="https://api.justpro.me/api/services/service_info" site="JustPro-Spa-Backend" dmx-param:service_id="app.main.product_info.route.params.id" sockets="true"></dmx-serverconnect>


    <script is="dmx-flow" id="ShowSlides" type="text/dmx-flow" autorun>[
  {
    wait: {delay: 2000}
  },
  {
    condition: {
      if: "{{app.main.product_info.service_info.data.queryServices.services_photos}}",
      then: {
        steps: {
          runJS: {
            function: "showSlides",
            args: ["1"]
          }
        }
      }
    }
  }
]</script>
    <div class="padding-top padding-bottom">
        <div class="navbar no-hairline no-shadow no-border">
            <div class="navbar-inner" style="padding-right:0px !important; padding-left:0px !important; margin-right:0px !important">
                <div class="left">
                    <a href="#" class="link back">
                        <i class="icon f7-icons">arrow_left</i>
                    </a>

                </div>

                <div class="title">Details</div>
                <div class="right">
                    <a href="#" class="link panel-open icon-only" data-panel="left">

                        <i class="icon f7-icons">ellipsis_vertical</i>
                    </a>
                </div>
            </div>
        </div>

    </div>
    <div class="toolbar toolbar-bottom toolbar-bottom-md no-shadow">
        <div class="toolbar-inner justify-content-center" style="padding:10px !important">
            <a href="#!" class="item-link list-button button-large rounded-xl button-6 bg-color-primary button-fill text-color-white" dmx-on:click="run({condition:{if:`(app.main.product_info.qty_form.quantity.value >= 1)`,then:{steps:[{run:{action:`app.Cart.upsert({product_id: app.main.product_info.service_info.data.queryServices.id},{product_id: app.main.product_info.service_info.data.queryServices.id, product_stripe_id: app.main.product_info.service_info.data.queryServices.stripe_price_id, product_name: app.main.product_info.service_info.data.queryServices.product_name.capitalize(), product_quantity: product_quantity+app.main.product_info.varQty.value.toNumber(), product_amt: app.main.product_info.service_info.data.queryServices.product_amt, name: app.main.product_info.service_info.data.queryServices.product_name, quantity: app.main.product_info.qty_form.quantity.value.toNumber(), amount: app.main.product_info.service_info.data.queryServices.product_amt, matrix: app.main.product_info.qty_form.matrix.value, total: app.main.product_info.overall_total.value, vat: app.main.product_info.vat_amount.value, product_avatar: app.main.product_info.service_info.data.queryServices.product_avatar, customer_id: app.Current_user.data.customer.id, service_type: app.main.product_info.qty_form.provider_type.value})`}},{run:{action:`app.main.navigate(\'/choose-professional/\'+app.main.product_info.service_info.data.queryServices.id+\'/\'+app.main.product_info.qty_form.provider_type.value,{})`}}]},else:{steps:{'f7.dialog.alert':{text:'Please select the number of people that need this service.',title:'How many people?'}}}}})" dmx-show="app.main.product_info.service_info.data.queryServices" style="width:100%">Show providers</a>
        </div>
    </div>
    <div class="page-content bg-gray pt-0 mr-0 ml-0">
        <dmx-preloader id="justpropreloader" spinner="pulse" color="#ff6600"></dmx-preloader>


        <div class="row">
            <div class="col-100" style="height:256px !important">
                <dmx-slideshow id="productreview" dmx-bind:slides="app.main.product_info.service_info.data.queryServices.services_photos" slide-url="avatar_url">
                </dmx-slideshow>
                <!--       <div class="slideshow-container" style="height:256px !important; margin-right:-50px !important; margin-left:0px !important; padding-right:-50px !important; padding-left:0px !important; right:-60 !important">

                    <div class="mySlides fade mr-0 ml-0">
                        <div class="numbertext">{{($index + 1)+' / '+app.main.product_info.service_info.data.queryServices.services_photos.count()}}</div>
                        <img style="width:100%" dmx-bind:src="avatar_url" height="256">
                        <div class="text">{{app.main.product_info.service_info.data.queryServices.product_name.titlecase()}}</div>
                    </div>
                    <a class="prev" onclick="plusSlides(-1)">❮</a>
                    <a class="next" onclick="plusSlides(1)">❯</a>
                </div> -->
            </div>

            <!--<div style="text-align:center">
                        <span class="dot" dmx-repeat:repeat_dots="app.main.product_info.service_info.data.queryServices.services_photos" dmx-on:click="run({runJS:{function:'currentSlide',args:[`($index + 1)`]}})"></span>
                    </div>
                    -->

            <div class="col-100" style="margin-top:70px">
                <h3 class="title text-align-center strong mb-10">{{app.main.product_info.service_info.data.queryServices.product_name.titlecase()}}</h3>
                <div class="text-align-center">
                    <h2 class="strong mt-0"> {{app.main.product_info.overall_total.value.toNumber().formatCurrency('AED', '.', ',', 2)}}</h2>
                    <p class="text-align-center" style="margin-top:-25px"><small>5% VAT Included </small></p>
                    <input type="hidden" name="vat_amount" id="vat_amount" dmx-bind:value="app.main.product_info.working_total.value.toNumber().per(5)">

                    <input type="hidden" name="working_total" id="working_total" dmx-bind:value="(app.main.product_info.service_info.data.queryServices.product_amt.toNumber() * (app.main.product_info.qty_form.quantity.value * app.main.product_info.qty_form.matrix.value))">
                    <input type="hidden" name="overall_total" id="overall_total" dmx-bind:value="(app.main.product_info.working_total.value.toNumber() + app.main.product_info.vat_amount.value.toNumber())">
                </div>

            </div>

        </div>
        <div class="mb-50" style="margin-top:-40px !important">
            <div class="row">

                <div class="col-100 mt-10 mb-0 ml-10" style="margin-bottom:0px !important">
                    <h4 class="custom-font mb-0" style="margin-bottom:0px !important; color:#c5c5c5"> Book Now <i class="bi bi-chevron-down"></i></h4>
                </div>

                <div class="col-100 mt-0" style="margin-top:-30px !important">

                    <form action="" id="qty_form">
                        <div class="list inline-labels">

                            <ul>
                                <li>
                                    <a class="item-link smart-select smart-select-init" data-open-in="sheet">
                                        <select name="quantity" id="quantity" required="" data-msg-required="Please select quantity">
                                            <option value="1" selected>Just me</option>
                                            <option value="2">2 People</option>
                                            <option value="3">3 People</option>
                                            <option value="4">4 People</option>
                                            <option value="5">5 People</option>
                                            <option value="6">6 People</option>
                                        </select>
                                        <div class="item-content">
                                            <div class="item-inner">
                                                <div class="item-title strong">Booking for?</div>
                                            </div>
                                        </div>
                                    </a>
                                </li>

                            </ul>

                            <ul dmx-show="app.main.product_info.service_info.data.queryServices.amount_matrix">
                                <li>
                                    <a class="item-link smart-select smart-select-init" data-open-in="sheet">
                                        <select name="matrix" id="matrix" required="" data-msg-required="Please select quantity">
                                            <option value="1" selected>60 Minutes </option>
                                            <option value="2">120 Minutes </option>
                                            <option value="3">180 Minutes </option>
                                        </select>
                                        <div class="item-content">
                                            <div class="item-inner">
                                                <div class="item-title strong">Duration?</div>
                                            </div>
                                        </div>
                                    </a>
                                </li>
                            </ul>
                            <ul>
                                <li>
                                    <a class="item-link smart-select smart-select-init" data-open-in="sheet">
                                        <select name="provider_type" id="provider_type" required="" data-msg-required="Please select quantity">
                                            <option selected="" value="home">Home</option>
                                            <option value="salon">Salon</option>
                                        </select>
                                        <div class="item-content">
                                            <div class="item-inner">
                                                <div class="item-title strong">Where do you want this service?</div>
                                            </div>
                                        </div>
                                    </a>
                                </li>
                            </ul>
                        </div>

                    </form>

                </div>

                <div class="block mt-0">
                    <div>
                        <small class="strong">Service Description</small>
                    </div>
                    <div class="col">
                        <p>{{app.main.product_info.service_info.data.queryServices.product_description.titlecase()}}</p>
                    </div>
                </div>

                <div class="col-100">
                    <div class="write-reviews-box container margin-bottom">
                        <div class="reviews-head text-align-center">
                            <p class="text-black ma-0">More than 99.9% of our clients responded with positive reviews on this service.</p>
                        </div>
                        <div class="rating-info">
                            <h2 class="rating-text">{{app.main.product_info.service_info.data.rating}}</h2>
                            <ul class="rating-list">
                                <li class="rating-star"><i class="fas fa-star" dmx-show="(app.main.product_info.service_info.data.rating > 0)"></i></li>
                                <li class="rating-star"><i class="fas fa-star" dmx-show="(app.main.product_info.service_info.data.rating > 1)"></i></li>
                                <li class="rating-star"><i class="fas fa-star" dmx-show="(app.main.product_info.service_info.data.rating > 2)"></i></li>
                                <li class="rating-star"><i class="fas fa-star" dmx-show="(app.main.product_info.service_info.data.rating > 3)"></i></li>
                                <li class="rating-star"><i class="fas fa-star" dmx-show="(app.main.product_info.service_info.data.rating > 4)"></i></li>
                            </ul>
                        </div>

                    </div>

                </div>
            </div>
        </div>
    </div>

</div>